<include file="Public:header" />
<script type='text/javascript' src='__BCS_PUBLIC__/js/x3dom.js'></script>
<script type='text/javascript' src='__BCS_PUBLIC__/js/jquery-2.1.3.min.js'></script>
<link rel='stylesheet' type='text/css'
	href='__BCS_PUBLIC__/css/x3dom.css' />
	
<script type="text/javascript" charset="utf-8">
	$(document).ready(function(){
		//Every time the user clicks on the 'take screenhot' button
		$("#btnTakeScreenshot").on("click", function() {
			//Get data url from the runtime
			var imgUrl = document.getElementById("canvas").runtime.getScreenshot();
			$('#preview').attr("src",imgUrl);
			$('#download').attr("href",imgUrl);
			$('#download').attr("download","screenshot.png");
			$('#preview_name').html("右侧截图，点击下载后上传");			
		});
	});
</script>

</head>
<body>
	<input type='radio' name='model' id='modelcategory' />
	<input type='radio' name='model' id='hide' />
	<div id='content'>
		<label id='slider' class='modelcategory' for='modelcategory'>更多模型</label>
		<label id='slider' class='hide' for='hide'>收起侧栏</label>
	</div>
	<aside class="modelcategory">
		<div class="InfoContainer">
			<include file="Public:moreModel" />
	</aside>
	<div class="wrap">
		<include file="Public:logo" />
		<div class="carousel">
			<div class='item2'>
				<img id='preview'
					src='__BCS_UPLOAD__/{$model.folder}/preview.{$model.preview_ext}'
					alt='{$model.title}' />
				<h2 id="preview_name">模型缩略图</h2>
			</div>
			<div class='item2'>
				<x3d id='canvas'> <scene dopickpass="true" pickmode="idBuf"
					bboxsize="-1,-1,-1" bboxcenter="0,0,0" render="true" def="scene">
				<navigationInfo id="head" headlight='{$model.hl_on}'
					type='"EXAMINE"'></navigationInfo> <directionalLight
					id="directional" on="{$model.dl_on}"></directionalLight> <Viewpoint
					id='viewpoint' description='Default Viewpoint'
					position='{$model.vp_position}'
					orientation='{$model.vp_orientation}'></Viewpoint> <background
					topurl="" righturl="" lefturl="" fronturl="" bottomurl=""
					backurl="__BCS_PUBLIC__/images/low_contrast_linen.png" skyangle=""
					groundangle="" groundcolor="" transparency="1.0" skycolor="0 0 0">
				</background> <Environment id="gamma" gammaCorrectionDefault="linear"></Environment>
				<Inline nameSpaceName="s" mapDEFToID="true"
					url="__BCS_UPLOAD__/{$model.folder}/model.x3d"> </Inline> </scene> </x3d>
				<h2>实际模型（点击模型后，按下A键）</h2>
			</div>

			<div class="clear"></div>
						<form method="post" action="__URL__/change"
				enctype="multipart/form-data" class="formclass marginform" name="upload_form">
				<h1>更换模型缩略图（<a href="#" id="btnTakeScreenshot">截取右侧模型图</a>>><a href="#" id="download">下载</a>）</h1>
				<input type="hidden" name="MAX_FILE_SIZE" value="10485760" />
				<input type="hidden" name="folder" value="{$model.folder}"/>
				<input type="hidden" name="preview_ext" value="{$model.preview_ext}"/>
				<input type='text' name='textfield' id='textfield2'
				class='formclass-input' placeholder="必选" /> 
				<input name="preview" type="file" value="浏览"
				accept="image/png,image/gif,image/jpeg,image/pjpeg"
				class="formclass-file textfield0"
				onchange="document.getElementById('textfield2').value=this.value" />
				<input type="submit" value="上传" name="B1" class="formclass-submit" />
			</form>
		</div>
	</div>

	<include file="Public:footer" />
</body>
</html>